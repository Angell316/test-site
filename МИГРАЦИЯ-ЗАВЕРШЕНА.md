# üéâ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Shikimori GraphQL API –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å `use()`**
- ‚ùå –ë—ã–ª–æ: `const resolvedParams = use(Promise.resolve(params))`
- ‚úÖ –°—Ç–∞–ª–æ: `const params = useParams()` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Next.js —Ö—É–∫

### 2. **–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ GraphQL**
–§–∞–π–ª: `lib/shikimoriGraphQL.js`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ GraphQL —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ **–ü–æ—Å—Ç–µ—Ä—ã –≤ 2x —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏** (main2xUrl)
- ‚úÖ **–°–∫—Ä–∏–Ω—à–æ—Ç—ã –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ** (originalUrl)
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- ‚úÖ Rate limiting: 5 req/sec
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: 5 –º–∏–Ω—É—Ç

### 3. **–ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**

#### REST API (–±—ã–ª–æ):
```
https://shikimori.one/system/animes/original/58426.jpg?1718266672
```
**–ö–∞—á–µ—Å—Ç–≤–æ:** –°—Ä–µ–¥–Ω–µ–µ, JPG

#### GraphQL API (—Å—Ç–∞–ª–æ):
```
https://shikimori.one/uploads/poster/animes/58426/main_2x-ada3d85205b582ae71576993a820b321.webp
```
**–ö–∞—á–µ—Å—Ç–≤–æ:** 2x —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, WebP, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ! üéØ

### 4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**

–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã:
- `poster.main2xUrl` - –ø–æ—Å—Ç–µ—Ä –≤ 2x –∫–∞—á–µ—Å—Ç–≤–µ ‚≠ê
- `poster.originalUrl` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç–µ—Ä
- `screenshots[].originalUrl` - —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤ –≤—ã—Å–æ–∫–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ üì∏
- `screenshots[].x332Url` - —Å—Ä–µ–¥–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã
- `screenshots[].x166Url` - –º–∏–Ω–∏–∞—Ç—é—Ä—ã

### 5. **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

‚úÖ **–ì–ª–∞–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
- `app/page.js` - –≥–ª–∞–≤–Ω–∞—è
- `app/anime/[id]/page.js` - –¥–µ—Ç–∞–ª—å–Ω–∞—è (–ò–°–ü–†–ê–í–õ–ï–ù–ê –û–®–ò–ë–ö–ê —Å use())
- `app/anime/page.js` - –∫–∞—Ç–∞–ª–æ–≥
- `app/movies/page.js` - —Ñ–∏–ª—å–º—ã
- `app/top/page.js` - —Ç–æ–ø

‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `components/Header.js` - –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ GraphQL
- `components/MoviesSection.js`
- `components/GenresSection.js`

‚úÖ **–£—Ç–∏–ª–∏—Ç—ã:**
- `app/data/animeData.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GraphQL
- `lib/shikimoriGraphQL.js` - –Ω–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd anime-site
npm install
npm run dev
```

**–°–∞–π—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞:** http://localhost:3001 (–∏–ª–∏ 3000 –µ—Å–ª–∏ —Å–≤–æ–±–æ–¥–µ–Ω)

## üì¶ –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | API | –Ø–∑—ã–∫ | –ö–∞—á–µ—Å—Ç–≤–æ |
|--------|----------|-----|------|----------|
| v1.0.0 | –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è | - | - | - |
| v2.0.0 | –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω | - | - | - |
| v3.0.0 | Jikan API | REST | EN | –°—Ä–µ–¥–Ω–µ–µ |
| v3.0.1 | –°—Ç–∞–±–∏–ª—å–Ω–∞—è Jikan | REST | EN | –°—Ä–µ–¥–Ω–µ–µ |
| v4.0.0 | Shikimori REST | REST | RU | –°—Ä–µ–¥–Ω–µ–µ |
| **v4.1.0** | **Shikimori GraphQL** | **GraphQL** | **RU** | **–í—ã—Å–æ–∫–æ–µ** ‚≠ê |

### –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:

```bash
# –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ (Jikan/MyAnimeList)
git checkout v3.0.1

# –†—É—Å—Å–∫–∏–π —è–∑—ã–∫, —Å—Ä–µ–¥–Ω–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ (Shikimori REST)
git checkout v4.0.0

# –†—É—Å—Å–∫–∏–π —è–∑—ã–∫, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (Shikimori GraphQL) ‚Üê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
git checkout main
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ GraphQL

### 1. **–ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
- –ü–æ—Å—Ç–µ—Ä—ã –≤ 2x —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
- WebP —Ñ–æ—Ä–º–∞—Ç (–º–µ–Ω—å—à–µ –≤–µ—Å, –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- –î–æ—Å—Ç—É–ø –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ

### 2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞

### 3. **–ì–∏–±–∫–æ—Å—Ç—å**
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ API
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞

## üìù –ü—Ä–∏–º–µ—Ä GraphQL –∑–∞–ø—Ä–æ—Å–∞

```graphql
query GetAnime($ids: String!) {
  animes(ids: $ids, limit: 1) {
    id
    name
    russian
    japanese
    score
    poster {
      originalUrl
      mainUrl
      main2xUrl  # ‚Üê 2x –∫–∞—á–µ—Å—Ç–≤–æ!
    }
    screenshots {
      originalUrl  # ‚Üê –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
      x332Url
      x166Url
    }
    genres {
      id
      name
      russian
    }
    studios {
      id
      name
    }
    related {
      anime {
        id
        name
        russian
      }
    }
  }
}
```

## üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```javascript
{
  id: 58426,
  title: "–î–∞–Ω–º–∞—á–∏: –ú–µ–º–æ—Ä–∏—è –§—Ä–µ–∑",  // —Ä—É—Å—Å–∫–∏–π
  titleEn: "DanMachi: Memoria Freese",
  titleJp: "„ÉÄ„É≥„Åæ„Å° „É°„É¢„É™„Ç¢„Éª„Éï„É¨„Éº„Çº",
  
  // –í–´–°–û–ö–û–ï –ö–ê–ß–ï–°–¢–í–û:
  image: "https://shikimori.one/uploads/poster/.../main_2x-....webp",
  poster2x: "https://shikimori.one/uploads/poster/.../main_2x-....webp",
  screenshots: [
    "https://shikimori.one/uploads/screenshots/.../original-...",
    "https://shikimori.one/uploads/screenshots/.../original-...",
    // ... –±–æ–ª—å—à–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
  ],
  
  description: "–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ...",
  genre: ["–≠–∫—à–µ–Ω", "–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è", "–§—ç–Ω—Ç–µ–∑–∏"],
  rating: 7.8,
  episodes: 12,
  status: "–ó–∞–≤–µ—Ä—à—ë–Ω",
  year: 2024,
  
  source: "shikimori-graphql"
}
```

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

1. ‚úÖ **–û—à–∏–±–∫–∞ `use()` –≤ app/anime/[id]/page.js**
   - –ë—ã–ª–æ: `const resolvedParams = use(Promise.resolve(params))`
   - –°—Ç–∞–ª–æ: `const params = useParams()`

2. ‚úÖ **–ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–µ—Ä–æ–≤**
   - –ë—ã–ª–æ: REST API —Å JPG —Å—Ä–µ–¥–Ω–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
   - –°—Ç–∞–ª–æ: GraphQL —Å WebP –≤ 2x —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏

3. ‚úÖ **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫**
   - –ë—ã–ª–æ: –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∞–Ω–∏–º–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –º–∞—Å—Å–∏–≤–µ
   - –°—Ç–∞–ª–æ: –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ GraphQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Shikimori GraphQL**: https://shikimori.one/api/doc/graphql
- **–û–±—Å—É–∂–¥–µ–Ω–∏–µ GraphQL**: https://shikimori.one/clubs/950-shikimori-api/topics/594748-graphql
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–∞—á–µ—Å—Ç–≤–æ–º**: https://shikimori.one/clubs/950-shikimori-api/topics/463771-nizkoe-kachestvo-anime-posterov

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**
‚úÖ **–ü–æ—Å—Ç–µ—Ä—ã –≤ 2x —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ (WebP)**
‚úÖ **–°–∫—Ä–∏–Ω—à–æ—Ç—ã –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ**
‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ GraphQL**
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏**
‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**
‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**

---

## üéâ –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤!

**–í–µ—Ä—Å–∏—è:** v4.1.0
**API:** Shikimori GraphQL
**–Ø–∑—ã–∫:** –†—É—Å—Å–∫–∏–π
**–ö–∞—á–µ—Å—Ç–≤–æ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ

**GitHub:** https://github.com/Angell316/test-site
**–õ–æ–∫–∞–ª—å–Ω–æ:** http://localhost:3001

---

*–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ! üá∑üá∫üé®*

