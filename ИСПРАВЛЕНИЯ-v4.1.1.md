# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è v4.1.1 - –í—Å–µ –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã

## üêõ –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. **TypeError: featuredAnime is not iterable**
**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –≤—Å–µ –µ—â–µ –ø—ã—Ç–∞–ª–∏—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ mock –¥–∞–Ω–Ω—ã–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ `app/anime/[id]/layout.js` - —É–±—Ä–∞–Ω `generateStaticParams` —Å —Å—Ç–∞—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ `app/profile/page.js` - –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ `getAllAnime()` —Å GraphQL
- ‚úÖ `components/FeaturedSection.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getPopularAnime()`
- ‚úÖ `components/PopularSection.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getTopRatedAnime()`

### 2. **–ü—Ä–æ–ø–∞–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏**
**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ API

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Shikimori GraphQL API

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### app/anime/[id]/layout.js
```javascript
// ‚ùå –ë–´–õ–û:
import { featuredAnime, popularAnime } from '@/app/data/animeData'
export async function generateStaticParams() {
  const allAnime = [...featuredAnime, ...popularAnime]
  // ...
}

// ‚úÖ –°–¢–ê–õ–û:
// Layout –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –¥–µ—Ç–∞–ª–µ–π –∞–Ω–∏–º–µ
// generateStaticParams —É–±—Ä–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º dynamic rendering —Å API
export default function AnimeDetailLayout({ children }) {
  return children
}
```

### app/profile/page.js
```javascript
// ‚ùå –ë–´–õ–û:
import { featuredAnime, popularAnime } from '@/app/data/animeData'
const allAnime = [...featuredAnime, ...popularAnime, ...customAnime]

// ‚úÖ –°–¢–ê–õ–û:
import { getAllAnime } from '@/app/data/animeData'
const [allAnime, setAllAnime] = useState([])

useEffect(() => {
  async function loadAnime() {
    const anime = await getAllAnime()
    setAllAnime(anime)
  }
  loadAnime()
}, [])
```

### components/FeaturedSection.js
```javascript
// ‚ùå –ë–´–õ–û:
import { featuredAnime } from '@/app/data/animeData'
{featuredAnime.map((anime) => ...)}

// ‚úÖ –°–¢–ê–õ–û:
import { getPopularAnime } from '@/app/data/animeData'
const [anime, setAnime] = useState([])

useEffect(() => {
  async function loadAnime() {
    const data = await getPopularAnime(12)
    setAnime(data)
  }
  loadAnime()
}, [])
```

### components/PopularSection.js
```javascript
// ‚ùå –ë–´–õ–û:
import { popularAnime } from '@/app/data/animeData'
{popularAnime.map((anime) => ...)}

// ‚úÖ –°–¢–ê–õ–û:
import { getTopRatedAnime } from '@/app/data/animeData'
const [anime, setAnime] = useState([])

useEffect(() => {
  async function loadAnime() {
    const data = await getTopRatedAnime(12)
    setAnime(data)
  }
  loadAnime()
}, [])
```

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ **–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**
‚úÖ **–ö–∞—Ä—Ç–∏–Ω–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ**
‚úÖ **–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Shikimori GraphQL API**
‚úÖ **–í—Å–µ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**
‚úÖ **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
‚úÖ **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç**

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞: **http://localhost:3001**

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å GraphQL
2. ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ –∞–Ω–∏–º–µ - `/anime`
3. ‚úÖ –î–µ—Ç–∞–ª–∏ –∞–Ω–∏–º–µ - `/anime/[id]`
4. ‚úÖ –§–∏–ª—å–º—ã - `/movies`
5. ‚úÖ –¢–æ–ø - `/top`
6. ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å - `/profile`
7. ‚úÖ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - `/admin`

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (GraphQL)

**–í—Å–µ –∞–Ω–∏–º–µ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç:**
```javascript
{
  id: 12345,
  title: "–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º",
  titleEn: "English Title",
  titleJp: "Êó•Êú¨Ë™û„Çø„Ç§„Éà„É´",
  
  // –í–´–°–û–ö–û–ï –ö–ê–ß–ï–°–¢–í–û –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô:
  image: "https://shikimori.one/uploads/poster/.../main_2x-....webp",
  poster2x: "https://shikimori.one/uploads/poster/.../main_2x-....webp",
  screenshots: [
    "https://shikimori.one/uploads/screenshots/.../original-...",
    // ... –±–æ–ª—å—à–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
  ],
  
  description: "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º...",
  genre: ["–≠–∫—à–µ–Ω", "–î—Ä–∞–º–∞"],
  rating: 8.5,
  episodes: 24,
  status: "–ó–∞–≤–µ—Ä—à—ë–Ω",
  year: 2024,
  source: "shikimori-graphql"
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API –ò—Å—Ç–æ—á–Ω–∏–∫
- **API:** Shikimori GraphQL
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `https://shikimori.one/api/graphql`
- **–Ø–∑—ã–∫:** –†—É—Å—Å–∫–∏–π
- **–ö–∞—á–µ—Å—Ç–≤–æ:** 2x —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (WebP)

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 5 –º–∏–Ω—É—Ç
- **–ú–µ—Å—Ç–æ:** In-memory cache –≤ `lib/shikimoriGraphQL.js`

### Rate Limiting
- **–õ–∏–º–∏—Ç:** 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** 250ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

## üì¶ –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------|----------|
| v4.1.0 | ‚ö†Ô∏è | GraphQL API - –±—ã–ª–∏ –æ—à–∏–±–∫–∏ —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ |
| **v4.1.1** | ‚úÖ | **–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –°–¢–ê–ë–ò–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø** |

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**
‚úÖ **–ö–∞—Ä—Ç–∏–Ω–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ (2x, WebP)**
‚úÖ **–í—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**
‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ GraphQL**
‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
‚úÖ **–ü—Ä–æ—Ñ–∏–ª—å –∏ –∞–¥–º–∏–Ω–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç**

---

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π! –ú–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è! üá∑üá∫üéâ**

**–ó–∞–ø—É—Å–∫:** `npm run dev`
**URL:** http://localhost:3001

